/* @preserve
 * LatLon v1.0, a JS library for parsing and formatting coordinates.
 * (c) 2019-2020 Jiri Richter
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).LatLon={})}(this,function(e){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/**
      * @preserve IntegraXor Web SCADA - JavaScript Number Formatter
      * http://www.integraxor.com/
      * author: KPL, KHL
      * (c)2011 ecava
      * Dual licensed under the MIT or GPL Version 2 licenses.
      */
function d(e,t){if(!e||isNaN(+t))return t;var n=(t="-"===e.charAt(0)?-t:+t)<0?t=-t:0,r=e.match(/[^\d\-\+#]/g),i=r&&r[r.length-1]||".",o=r&&r[1]&&r[0]||",";e=e.split(i);t=+(t=t.toFixed(e[1]&&e[1].length))+"";var s=e[1]&&e[1].lastIndexOf("0"),a=t.split(".");(!a[1]||a[1]&&a[1].length<=s)&&(t=(+t).toFixed(s+1));var u=e[0].split(o);e[0]=u.join("");var d=e[0]&&e[0].indexOf("0");if(-1<d)for(;a[0].length<e[0].length-d;)a[0]="0"+a[0];else 0==+a[0]&&(a[0]="");(t=t.split("."))[0]=a[0];var l=u[1]&&u[u.length-1].length;if(l){for(var c=t[0],g="",h=c.length%l,p=0,f=c.length;p<f;p++)g+=c.charAt(p),!((p-h+1)%l)&&p<f-l&&(g+=o);t[0]=g}return t[1]=e[1]&&t[1]?i+t[1]:"",(n?"-":"")+t[0]+t[1]}var l={template:"{lat} {lng}",format:"DD",designators:!0,digits:3};function n(e){e=this.normalizeCoordinateNumbers(e),this.degrees=e[0],this.minutes=e[1],this.seconds=e[2],this.milliseconds=e[3],this.sign=this.normalizedSignOf(this.degrees),this.degrees=Math.abs(this.degrees)}n.prototype.normalizeCoordinateNumbers=function(e){var t,n,r,i,o;for(o=[0,0,0,0],n=r=0,i=e.length;r<i;n=++r)t=e[n],o[n]=parseFloat(t);return o},n.prototype.normalizedSignOf=function(e){return 0<=e?1:-1},n.prototype.detectSpecialFormats=function(){if(this.degreesCanBeSpecial()){if(this.degreesCanBeMilliseconds())return this.degreesAsMilliseconds();if(this.degreesCanBeDegreesMinutesAndSeconds())return this.degreesAsDegreesMinutesAndSeconds();if(this.degreesCanBeDegreesAndMinutes())return this.degreesAsDegreesAndMinutes()}},n.prototype.degreesCanBeSpecial=function(){var e;return e=!1,this.minutes||this.seconds||(e=!0),e},n.prototype.degreesCanBeMilliseconds=function(){return 909090<this.degrees},n.prototype.degreesAsMilliseconds=function(){return this.milliseconds=this.degrees,this.degrees=0},n.prototype.degreesCanBeDegreesMinutesAndSeconds=function(){return 9090<this.degrees},n.prototype.degreesAsDegreesMinutesAndSeconds=function(){var e;return e=Math.floor(this.degrees/1e4),this.minutes=Math.floor((this.degrees-1e4*e)/100),this.seconds=Math.floor(this.degrees-1e4*e-100*this.minutes),this.degrees=e},n.prototype.degreesCanBeDegreesAndMinutes=function(){return 360<this.degrees},n.prototype.degreesAsDegreesAndMinutes=function(){var e;return e=Math.floor(this.degrees/100),this.minutes=this.degrees-100*e,this.degrees=e},n.prototype.toDecimal=function(){return this.sign*(this.degrees+this.minutes/60+this.seconds/3600+this.milliseconds/36e5)};function t(){}t.prototype.isValid=function(e){var t;t=!0;try{return this.validate(e),t}catch(e){return t=!1}},t.prototype.validate=function(e){return this.checkContainsNoLetters(e),this.checkValidOrientation(e),this.checkNumbers(e)},t.prototype.checkContainsNoLetters=function(e){if(/(?![neswd])[a-z]/i.test(e))throw new Error("Coordinate contains invalid alphanumeric characters.")},t.prototype.checkValidOrientation=function(e){if(!/^[^nsew]*[ns]?[^nsew]*[ew]?[^nsew]*$/i.test(e))throw new Error("Invalid cardinal direction.")},t.prototype.checkNumbers=function(e){var t;return t=e.match(/-?\d+(\.\d+)?/g),this.checkAnyCoordinateNumbers(t),this.checkEvenCoordinateNumbers(t),this.checkMaximumCoordinateNumbers(t)},t.prototype.checkAnyCoordinateNumbers=function(e){if(0===e.length)throw new Error("Could not find any coordinate number")},t.prototype.checkEvenCoordinateNumbers=function(e){if(e.length%2)throw new Error("Uneven count of latitude/longitude numbers")},t.prototype.checkMaximumCoordinateNumbers=function(e){if(6<e.length)throw new Error("Too many coordinate numbers")};function r(e){this.coordinates=e,this.latitudeNumbers=null,this.longitudeNumbers=null,this.validate(),this.parse()}r.prototype.validate=function(){return(new t).validate(this.coordinates)},r.prototype.parse=function(){return this.groupCoordinateNumbers(),this.latitude=this.extractLatitude(),this.longitude=this.extractLongitude()},r.prototype.groupCoordinateNumbers=function(){var e,t;return t=(e=this.extractCoordinateNumbers(this.coordinates)).length/2,this.latitudeNumbers=e.slice(0,t),this.longitudeNumbers=e.slice(0-t)},r.prototype.extractCoordinateNumbers=function(e){return e.match(/-?\d+(\.\d+)?/g)},r.prototype.extractLatitude=function(){var e;return e=this.coordinateNumbersToDecimal(this.latitudeNumbers),this.latitudeIsNegative()&&(e*=-1),e},r.prototype.extractLongitude=function(){var e;return e=this.coordinateNumbersToDecimal(this.longitudeNumbers),this.longitudeIsNegative()&&(e*=-1),e},r.prototype.coordinateNumbersToDecimal=function(e){var t;return(t=new n(e)).detectSpecialFormats(),t.toDecimal()},r.prototype.latitudeIsNegative=function(){return this.coordinates.match(/s/i)},r.prototype.longitudeIsNegative=function(){return this.coordinates.match(/w/i)},r.prototype.getLatitude=function(){return this.latitude},r.prototype.getLongitude=function(){return this.longitude},e.format=function(e,t,n){var r,i,o;Array.isArray(e)?(r=e[0],i=e[1],o=t):"number"==typeof e?(r=e,i=t,o=n):"object"===u(e)&&(r=e.lat,i="lon"in e?e.lon:e.lng,o=t);var s=Object.assign({},l,o),a=function(e,t,n){var r,i,o,s,a={lat:e,lng:t};return a.lng<0?(a.lng_neg=!0,a.lng=Math.abs(a.lng)):a.lng_neg=!1,a.lat<0?(a.lat_neg=!0,a.lat=Math.abs(a.lat)):a.lat_neg=!1,180<a.lng&&(a.lng=360-a.lng,a.lng_neg=!a.lng_neg),r="DM"===n.format?(i=(o=parseInt(a.lng))+"&deg; "+d("00."+"0".repeat(n.digits),60*(a.lng-o))+"'",(o=parseInt(a.lat))+"&deg; "+d("00."+"0".repeat(n.digits),60*(a.lat-o))+"'"):"DMS"===n.format?(o=parseInt(a.lng),s=60*(a.lng-o),i=o+"&deg; "+d("00",parseInt(s))+"' "+d("00.0",60*(s-parseInt(s)))+"''",o=parseInt(a.lat),s=60*(a.lat-o),o+"&deg; "+d("00",parseInt(s))+"' "+d("00.0",60*(s-parseInt(s)))+"''"):(i=d("#0."+"0".repeat(n.digits),a.lng)+"&deg;",d("##0."+"0".repeat(n.digits),a.lat)+"&deg;"),{lng:(!n.designators&&a.lng_neg?"-":"")+i+(n.designators?a.lng_neg?" W":" E":""),lat:(!n.designators&&a.lat_neg?"-":"")+r+(n.designators?a.lat_neg?" S":" N":"")}}(r,i,s);return s.template.replace(/\{lat\}/g,a.lat).replace(/\{lng\}/g,a.lng)},e.parse=function(e){var t=new r(e);return t.parse(),[t.latitude,t.longitude]},Object.defineProperty(e,"__esModule",{value:!0});var i=window.LatLon;e.noConflict=function(){return window.LatLon=i,this},window.LatLon=e});